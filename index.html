<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediCare Clinic Management System</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-card fade-in">
            <div class="login-header">
                <div class="logo">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                </div>
                <h1 class="login-title">MediCare CMS</h1>
                <p class="login-subtitle">Clinic Management System</p>
            </div>
            
            <form id="loginForm" class="modal-form">
                <div class="form-group">
                    <label class="form-label">User Type</label>
                    <select id="userType" class="form-select">
                        <option value="doctor">Doctor</option>
                        <option value="receptionist">Receptionist</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="email" required class="form-input" placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="password" required class="form-input" placeholder="Enter your password">
                </div>
                
                <button type="submit" class="btn btn-primary btn-full">
                    Sign In
                </button>
            </form>
            
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="hidden">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="header-logo">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                    </div>
                    <h1 class="header-title">MediCare Dashboard</h1>
                </div>
                
                <div class="header-right">
                    <span id="userInfo" class="user-info"></span>
                    <button id="logoutBtn" class="btn btn-danger">
                        Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-bar">
            <div class="nav-content">
                <div class="nav-buttons">
                    <button class="nav-btn active" data-section="overview">Overview</button>
                    <button class="nav-btn" data-section="patients">Patients</button>
                    <button class="nav-btn" data-section="tokens" id="tokensTab">Tokens</button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Overview Section -->
            <div id="overview" class="section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-text">
                                <h3>Total Patients</h3>
                                <p id="totalPatients" class="stat-number blue">0</p>
                            </div>
                            <div class="stat-icon blue">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.239"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-text">
                                <h3>Today's Tokens</h3>
                                <p id="todayTokens" class="stat-number green">0</p>
                            </div>
                            <div class="stat-icon green">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-text">
                                <h3>Pending Tokens</h3>
                                <p id="pendingTokens" class="stat-number yellow">0</p>
                            </div>
                            <div class="stat-icon yellow">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-content">
                            <div class="stat-text">
                                <h3>Completed</h3>
                                <p id="completedTokens" class="stat-number purple">0</p>
                            </div>
                            <div class="stat-icon purple">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <div class="section-header">
                        <h3 class="section-title">Recent Activity</h3>
                        <button id="clearActivitiesBtn" class="btn btn-danger btn-small">
                            Clear All
                        </button>
                    </div>
                    <div id="recentActivity">
                        <p class="text-center py-8">No recent activity</p>
                    </div>
                </div>
            </div>

            <!-- Patients Section -->
            <div id="patients" class="section hidden">
                <div class="card">
                    <div class="section-header">
                        <h2 class="section-title">Patient Management</h2>
                        <button id="addPatientBtn" class="btn btn-primary">
                            Add New Patient
                        </button>
                    </div>
                    
                    <!-- Search -->
                    <input type="text" id="patientSearch" placeholder="Search patients..." class="search-input">
                    
                    <!-- Patients Table -->
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Phone</th>
                                    <th>Age</th>
                                    <th>Gender</th>
                                    <th>Added By</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="patientsTable">
                                <tr>
                                    <td colspan="6" class="text-center py-8">No patients found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tokens Section -->
            <div id="tokens" class="section hidden">
                <div class="card">
                    <div class="section-header">
                        <h2 class="section-title">Token Management</h2>
                        <button id="generateTokenBtn" class="btn btn-success">
                            Generate Token
                        </button>
                    </div>
                    
                    <!-- Current Token Display -->
                    <div class="token-display">
                        <h3>Current Token</h3>
                        <div class="token-number" id="currentTokenDisplay">-</div>
                        <p class="token-subtitle">Now Serving</p>
                    </div>
                    
                    <!-- Token Controls -->
                    <div class="token-controls">
                        <button id="nextTokenBtn" class="btn btn-primary">
                            Next Token
                        </button>
                        <button id="resetTokensBtn" class="btn btn-danger">
                            Reset Tokens
                        </button>
                    </div>
                    
                    <!-- Tokens List -->
                    <div class="token-lists">
                        <div>
                            <h4 class="token-list-header">Pending Tokens</h4>
                            <div id="pendingTokensList" class="token-list">
                                <p class="text-center py-8">No pending tokens</p>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="token-list-header">Completed Tokens</h4>
                            <div id="completedTokensList" class="token-list">
                                <p class="text-center py-8">No completed tokens</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Patient Modal -->
    <div id="patientModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Patient</h3>
                <button id="closePatientModal" class="modal-close">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <form id="patientForm" class="modal-form">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" id="patientName" required class="form-input">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" id="patientPhone" required class="form-input">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Age</label>
                        <input type="number" id="patientAge" required min="1" max="120" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        <select id="patientGender" required class="form-select">
                            <option value="">Select</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Medical History (Optional)</label>
                    <textarea id="patientHistory" rows="3" class="form-textarea"></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">
                        Add Patient
                    </button>
                    <button type="button" id="cancelPatientModal" class="btn btn-secondary">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Generate Token Modal -->
    <div id="tokenModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Generate Token</h3>
                <button id="closeTokenModal" class="modal-close">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <form id="tokenForm" class="modal-form">
                <div class="form-group">
                    <label class="form-label">Select Patient</label>
                    <select id="tokenPatient" required class="form-select">
                        <option value="">Select a patient</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Visit Type</label>
                    <select id="visitType" required class="form-select">
                        <option value="">Select visit type</option>
                        <option value="Consultation">Consultation</option>
                        <option value="Follow-up">Follow-up</option>
                        <option value="Emergency">Emergency</option>
                        <option value="Routine Check">Routine Check</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Notes (Optional)</label>
                    <textarea id="tokenNotes" rows="3" class="form-textarea" placeholder="Any special notes..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="submit" class="btn btn-success">
                        Generate Token
                    </button>
                    <button type="button" id="cancelTokenModal" class="btn btn-secondary">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
    <script type="module" src="js/app.js"></script>
</body>
</html>